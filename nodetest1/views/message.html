<!DOCTYPE html>
<html>
<!--Head Info-->
  <head>
    <link rel="stylesheet" type="text/css" href="/stylesheets/message_style.css">
    <title>Tutor Me: Send message</title>
    <link rel="icon" href="images/favicon.png"> <!-- favicon not yet made -->
    <script src="http://code.jquery.com/jquery-1.12.2.js"></script>

    <script>

    $(document).ready(function(){
        function enterSubmit(e){
          if(e.keyCode==13)
          {
            $('#send').click();
            $('#m').keypress(enterSubmit);
            $('#m').focus();
            $('#messageBoard').animate({
                scrollTop: $('#messageBoard').get(0).scrollHeight
            }, 1500);
            //$('#messageBoard').scrollTop($('#messageBoard').height());
          }

        }
        $('#m').keypress(enterSubmit);
    });

    </script>
  </head>

<!-- Header bar -->
<div class="header">
  <a href="/"><img  id="logo" src="images/logo.png" alt="Logo"></a></div>

<div class="search_container">
  <form action="/search" class="search-wrapper cf">
        <input type="text" placeholder="Search..." required="">
        <button type="submit">Search</button>
    </form>
</div>

<div class="userlist">
<button class="user">John Smith</button>
</div>

<div class="prev_msg" id="messageBoard">
  <div class="msg1">
  <p>Hi, I would like to hire you as my tutor! </p>
  </div>

  <div class="send_msg">
    <div class="send">
        <input id="m" autocomplete="off" />
        <button onclick="sendMSG()" id="send">Send</button>
    </div>
  </div>

</div>
<script src="javascript/socket.io/socket.io.js"></script>
<script>
  
    var socket = io.connect('http://localhost:4200');

    socket.emit('subscribe', "chickenball");

    socket.on('message', function(msg){
      $('#messageBoard').html($('#messageBoard').html() + "<div class='msg1'><p>" + msg + "</p></div>");
    });

    function sendMSG(){
        var data = {msg:$('#m').val(), room:"chickenball", user:"bla"};
        socket.emit('message', data);
        $('#m').val('');
        return false;
    }
 
   

</script>

</html>
